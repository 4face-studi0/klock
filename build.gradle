import org.apache.tools.ant.taskdefs.condition.Os

buildscript {
	ext.genTargets = ['jvm', 'js']
	if (Os.isFamily(Os.FAMILY_WINDOWS)) {
		ext.genTargets += 'mingwX64'
	} else if (Os.isFamily(Os.FAMILY_MAC)) {
		ext.genTargets += 'macosX64'
		ext.genTargets += 'iosArm32'
		ext.genTargets += 'iosArm64'
		ext.genTargets += 'iosX64'
	} else {
		ext.genTargets += 'linuxX64'
	}
}

plugins {
	id 'kotlin-multiplatform' version '1.3.0-rc-146'
}

repositories {
	mavenLocal()
	jcenter()
	maven { url "https://dl.bintray.com/soywiz/soywiz" }
	maven { url "https://dl.bintray.com/kotlin/kotlin-eap" }
}

apply from: "$rootProject.rootDir/gradle/tools.gradle"

apply plugin: 'kotlin-multiplatform'
apply plugin: 'idea'

handleMpp(genTargets, [])


idea {
	module {
		excludeDirs = [file(".gradle"), file(".idea"), file("assets"), file("gradle/wrapper")]
	}
}
